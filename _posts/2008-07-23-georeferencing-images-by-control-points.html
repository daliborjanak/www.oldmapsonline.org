---
published: true 
category: blog 
layout: post
title: ! 'Georeferencing Images by Control Points: TransGen and gcps2wld utility'
date: '2008-07-23T07:49:00.000-07:00'
author: Petr Pridal
tags:
- georeference
- announcement
modified_time: '2008-07-22T23:02:37.658-07:00'
thumbnail: http://bp3.blogger.com/_YHHsqgPwuzQ/SIX0-aSPTDI/AAAAAAAAFvQ/emNLyU9cFnM/s72-c/affine_transform.gif
blogger_id: tag:blogger.com,1999:blog-2322567796333088461.post-2095697462375908445
redirect_from: /blog/2008/06/georeferencing-images-by-control-points.html
---

We have just released TransGen, a utility based on GeoTools/Java. It allows you to generate a best fitting affine transformation from the set of control points.<br /><br />The set of control points can be generated for example by our <a href="http://oldmapsonline.googlecode.com/svn/trunk/georeference.html">online tool prototype</a> and has a simple text format: "latitude longitude pixelx pixely" per line. A sample of <a href="http://oldmapsonline.googlecode.com/svn/trunk/gcps2wld/test.gcps">file with GCPS points</a> and related <a href="http://oldmapsonline.googlecode.com/svn/trunk/gcps2wld/test.jpg">JPG image</a> derived from <a href="http://www.shadedrelief.com/natural2/">Natural Earth II</a> is available in our code repository.<br /><br />The utility generates a <a href="http://en.wikipedia.org/wiki/World_file">World File</a>, which represents the best fitting transformation for given set of ground control points (GCPs) in a format that can be used by virtually any GIS system.<br /><br />The process of image registration is done by an algorithm, which allows you to restrict some of the standard operations. By default all the six affine operations are applied (translate x, translate y, scale x, scale y, rotate, skew).<br /><br /><a onblur="try {parent.deselectBloggerImageGracefully();} catch(e) {}" href="media/affine_transform.gif"><img style="float:left; margin:0 10px 10px 0;cursor:pointer; cursor:hand;" src="{{site.baseurl}}/blog/media/affine_transform.gif" border="0" alt="" id="BLOGGER_PHOTO_ID_5225852295678217266" /></a><br /><br />But you can set constant value for some of the operations, thus for example eliminating the skew/shear (this is what you need for generation of KML for Google Earth which only supports affine5) or rotation (when you know that the map has north orientation already). There is also a possibility to compute the best similarity transformation.<br /><br />You can download the command line utility implementing this algorithms:<br /><ul><br /><li><a href="http://oldmapsonline.googlecode.com/files/TransGen.exe">TransGen.exe</a> (for MS Windows)<br /></li><li><a href="http://oldmapsonline.googlecode.com/files/TransGen.jar">TransGen.jar</a> (Mac, Linux, ...).  Run as: "java -jar TransGen.jar"<br /></li></ul><br /><br />TransGen source code is available in <a href="http://code.google.com/p/oldmapsonline/source/browse/trunk/gcps2wld/">our code repository</a>. The programming and design of the algorithm was done by Jan Jezek and was funded from our grant. The main functionality is now available as part of Java <a href="http://www.geotools.org/">GeoTools</a> package, and therefore available to the community as well as to other programmers.<br /><br />We are going to embed the algorithms from this tool in the user friendly web-based tool we plan to develop to produce georeference for scanned maps. We have converted this utility to the Python programming language for production use (gcps2wld.py), where we used Affine6 and Affine5 implementation from excellent open-source <a href="http://mapanalyst.cartography.ch/">MapAnalyst</a> application.<br /><br />Note:<br />GeoTools.org is being used by OpenSource projects like <a href="http://geoserver.org/">GeoServer</a> or <a href="http://udig.refractions.net/">uDig</a>. Plenty of websites and information systems are profiting from the functionality provided by this library. For example Great Britain Historical GIS Project is utilizing it for development of its <a href="http://www.visionofbritain.org.uk/">http://www.visionofbritain.org.uk/</a> website)

